potatofs (2.8.3) unstable; urgency=medium

  v2.8.3
  * backend_s3 now cleans up the socket if there's no server listening on it
  * Have backend_s3 ignore SIGTERM so it doesn't get terminated during system
    shutdown
  * Don't print an error in DoClaim in backend_s3 if the exit code from the
    claim command is 2. This way we can avoid giving false errors in
    preloading.
  * Add a bit more logging at fs shutdown
  * Add missing error in mgr.c when we get connect failures

 -- Pascal Lalonde <plalonde@overnet.ca>  Wed, 15 Mar 2023 23:25:13 -0400

potatofs (2.8.2) unstable; urgency=medium

  v2.8.2
  * Apply the hint preload skew at preload time, not in the DB
  * In potatomgr, don't print errors at LOG_ERR when a slab requested with
    OSLAB_NONBLOCK hits XLOG_APP/XLOG_BUSY; just log at LOG_INFO instead
    with a custom error
  * Make the backend_s3 hints preload queue size configurable
  * Replace NewConfig by loadConfig; it was always a global var anyway
  * Prettify hint log messages in backend_s3
  * inode_inspect can now set OSLAB_NONBLOCK so that some potatoctl commands
    can return early with an error message

 -- Pascal Lalonde <plalonde@overnet.ca>  Tue, 14 Mar 2023 01:04:26 -0400

potatofs (2.8.1) unstable; urgency=medium

  v2.8.1
  * Fix mgr PID and version string output in ctop
  * Don't count claim contentions if the slab open flags have OSLAB_NONBLOCK
    set, because then it means this isn't affecting the filesystem itself.

 -- Pascal Lalonde <plalonde@overnet.ca>  Sat, 11 Mar 2023 21:48:22 -0500

potatofs (2.8.0) unstable; urgency=medium

  v2.8.0
  * Add dependency for golang-github-mattn-go-sqlite3-dev
  * Add hints and preload functionality to backend_s3
  * Add a NOHINT flag when opening slabs to avoid triggering a hint on the
    backend. This is to prevent looping indefinitely by triggering another
    hint when preloading a slab.
  * Add new counters for backend puts/gets/hints; this lets us compute a
    rough local cache hit ratio which we display in ctop.
  * Fix claim contention counter in ctop (was displaying the wrong counter)

 -- Pascal Lalonde <plalonde@overnet.ca>  Sat, 11 Mar 2023 20:53:06 -0500

potatofs (2.7.3) unstable; urgency=medium

  v2.7.3

  * Copyright 2023
  * Various clang-analyzer fixes, new lock contention counters
  * Use _exit() in child processes

  Fixes following Coverity scan:
  * Ignore coverity files
  * Missing break in switch that would cause the -f option to also set noatime
  * Missing args after format string
  * Use clock_gettime_x() anywhere it makes sense
  * Add missing dep on ncurses
  * Missing build dep on golang
  * Set the GOCACHE to something valid during build with pbuilder
  * ... and more.

 -- Pascal Lalonde <plalonde@overnet.ca>  Sun, 05 Mar 2023 16:40:17 -0500

potatofs (2.7.1) unstable; urgency=medium

  * Add missing fuse3 dependency
  * Fix warnings (and potential bugs) for fs_status and do_shutdown with O2
  * Add more sample params to example conf
  * Create the data dir at startup if it doesn exist
  * Unclaim slabs from LRU more aggressively when we're nearing our
    max_open limit

 -- Pascal Lalonde <plalonde@overnet.ca>  Sat, 03 Dec 2022 21:28:25 -0500

potatofs (2.7.0) unstable; urgency=medium

  * v2.7.0
  * Add ctop to potatoctl, an ncurses "top" tool
  * Add configurable log level to backend_s3
  * Add config example about shutdown grace period, and comment why it can
    be important

 -- Pascal Lalonde <plalonde@overnet.ca>  Thu, 01 Dec 2022 23:06:22 -0500

potatofs (2.6.2) unstable; urgency=medium

  v2.6.2
  * Fix used block calculation used during purge
  * Log inode/base along with duration when performing backend_get()

 -- Pascal Lalonde <plalonde@overnet.ca>  Mon, 28 Nov 2022 23:42:03 -0500

potatofs (2.6.1) unstable; urgency=medium

  v2.6.1
  Fix a few bugs, some major:
  * Truncate slabs in copy_outgoing_slab() and copy_incoming_slab(),
    otherwise we can end up with trailing bytes from a previous iteration.
    This causes those slabs to have the wrong CRC, preventing them from being
    used. Corruption, essentially.
  * Fix cast in slabdb for flags; just use uint32_t. Sqlite doesn't store
    short ints like uint8_t.
  * Fix possible bad file descriptor in failure situations in claim()
  * Have fs_sync() handle retryable errors
  * Convert XLOG_EOF to XLOG_BUSY in slab_load() to make that retryable by
    fs ops.
  * Have our test backend cleanup partial files when out of space
  * Display slab CRC in potatoctl
  * Add some logging
  * Update bench.sh to have smaller defaults to run on smaller systems

 -- Pascal Lalonde <plalonde@overnet.ca>  Mon, 28 Nov 2022 22:50:08 -0500

potatofs (2.6.0) unstable; urgency=medium

  * Fix libuuid1 dep
  * Add -encrypt and -decrypt to backend_s3, allowing to encrypt/decrypt slabs
    locally for troubleshooting

 -- Pascal Lalonde <plalonde@overnet.ca>  Sun, 27 Nov 2022 14:13:14 -0500

potatofs (2.5.0) unstable; urgency=medium

  * v2.5.0

 -- Pascal Lalonde <plalonde@overnet.ca>  Sun, 27 Nov 2022 12:54:31 -0500

potatofs (2.4.2) unstable; urgency=medium

  * Initial Release.

 -- Pascal Lalonde <plalonde@overnet.ca>  Wed, 23 Nov 2022 19:44:56 -0500
